\hypertarget{message__command__parameters_8c_source}{}\doxysection{message\+\_\+command\+\_\+parameters.\+c}
\label{message__command__parameters_8c_source}\index{src/common/message/message\_command\_parameters.c@{src/common/message/message\_command\_parameters.c}}
\mbox{\hyperlink{message__command__parameters_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00001}00001 \textcolor{preprocessor}{\#include <regex.h>}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00002}00002 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00003}00003 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00005}00005 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{message_8h}{message.h}}"{}}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00007}\mbox{\hyperlink{message_8h_a28d4651376c79b584f48cf6ea0e2089a}{00007}} \textcolor{keywordtype}{int} \mbox{\hyperlink{message__command__parameters_8c_a28d4651376c79b584f48cf6ea0e2089a}{get\_message\_next\_parameter\_kv}}(\textcolor{keywordtype}{char} *params\_start, \textcolor{keywordtype}{char} **key, \textcolor{keywordtype}{char} **value)}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00008}00008 \{}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00009}00009     regex\_t regex;}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00010}00010     regmatch\_t match[4]; \textcolor{comment}{// [0] = whole match, [1] = key, [2] = value,}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00011}00011                          \textcolor{comment}{// [3] = end of line}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00012}00012     \textcolor{keywordtype}{int} ret = regcomp(\&regex, \textcolor{stringliteral}{"{}\string^([\string^=]+)=([\string^\(\backslash\)n]+)(\(\backslash\)n)"{}}, REG\_EXTENDED);}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00013}00013     \textcolor{keywordflow}{if} (ret != 0)}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00014}00014     \{}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00015}00015         fprintf(stderr, \textcolor{stringliteral}{"{}Error compiling regex\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00016}00016         exit(1);}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00017}00017     \}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00019}00019     ret = regexec(\&regex, params\_start, 4, match, 0);}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00020}00020     regfree(\&regex);}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00021}00021     \textcolor{keywordflow}{if} (ret != 0)}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00022}00022         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00024}00024     *key = params\_start;}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00025}00025     params\_start[match[1].rm\_eo] = \textcolor{charliteral}{'\(\backslash\)0'}; \textcolor{comment}{// replace '=' with '\(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00027}00027     *value = params\_start + match[2].rm\_so;}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00028}00028     params\_start[match[2].rm\_eo] = \textcolor{charliteral}{'\(\backslash\)0'}; \textcolor{comment}{// replace '\(\backslash\)n\(\backslash\)n|\(\backslash\)n' with '\(\backslash\)0'}}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00030}00030     \textcolor{keywordflow}{return} match[0].rm\_eo;}
\DoxyCodeLine{\Hypertarget{message__command__parameters_8c_source_l00031}00031 \}}

\end{DoxyCode}
