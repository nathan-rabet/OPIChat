\hypertarget{safe__io_8c}{}\doxysection{src/common/safe\+\_\+io.c File Reference}
\label{safe__io_8c}\index{src/common/safe\_io.c@{src/common/safe\_io.c}}
{\ttfamily \#include \char`\"{}safe\+\_\+io.\+h\char`\"{}}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$sys/socket.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include \char`\"{}logger.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}message.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}xalloc.\+h\char`\"{}}\newline
Include dependency graph for safe\+\_\+io.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{safe__io_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsafe__recv__data}{safe\+\_\+recv\+\_\+data}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{safe__io_8c_a46167a977503a51eb6efe97e870568c3}{READ\+\_\+\+BUFFER\+\_\+\+SIZE}}~2048
\item 
\#define \mbox{\hyperlink{safe__io_8c_af4e18e810d48acdcf0c1927405197eef}{NB\+\_\+\+RECV\+\_\+\+AFTER\+\_\+\+RESET}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{safe__io_8c_a3730804c00874106746163562e2693ac}{safe\+\_\+send}} (int sockfd, const void $\ast$buf, size\+\_\+t count, int flags)
\begin{DoxyCompactList}\small\item\em Send a message to a client safely. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{safe__io_8c_af5b0cdbd9fea86b0c53e02b3b5e31518}{safe\+\_\+write}} (int fd, const void $\ast$buf, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Write a message to a file descriptor safely. \end{DoxyCompactList}\item 
ssize\+\_\+t \mbox{\hyperlink{safe__io_8c_a70bebf5ac8325b0eb363be83f11a1f9b}{safe\+\_\+read}} (int fd, void $\ast$$\ast$buf)
\begin{DoxyCompactList}\small\item\em Read a message from a file descriptor safely. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structmessage}{message}} $\ast$ \mbox{\hyperlink{safe__io_8c_ac8413ee3e5fa5ceab0e0cb43c4b6aab8}{safe\+\_\+recv}} (int sockfd, int flags, bool must\+Timeout)
\begin{DoxyCompactList}\small\item\em Receive a message from a client safely. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{safe__io_8c_af4e18e810d48acdcf0c1927405197eef}\label{safe__io_8c_af4e18e810d48acdcf0c1927405197eef}} 
\index{safe\_io.c@{safe\_io.c}!NB\_RECV\_AFTER\_RESET@{NB\_RECV\_AFTER\_RESET}}
\index{NB\_RECV\_AFTER\_RESET@{NB\_RECV\_AFTER\_RESET}!safe\_io.c@{safe\_io.c}}
\doxysubsubsection{\texorpdfstring{NB\_RECV\_AFTER\_RESET}{NB\_RECV\_AFTER\_RESET}}
{\footnotesize\ttfamily \#define NB\+\_\+\+RECV\+\_\+\+AFTER\+\_\+\+RESET}



Definition at line \mbox{\hyperlink{safe__io_8c_source_l00020}{20}} of file \mbox{\hyperlink{safe__io_8c_source}{safe\+\_\+io.\+c}}.

\mbox{\Hypertarget{safe__io_8c_a46167a977503a51eb6efe97e870568c3}\label{safe__io_8c_a46167a977503a51eb6efe97e870568c3}} 
\index{safe\_io.c@{safe\_io.c}!READ\_BUFFER\_SIZE@{READ\_BUFFER\_SIZE}}
\index{READ\_BUFFER\_SIZE@{READ\_BUFFER\_SIZE}!safe\_io.c@{safe\_io.c}}
\doxysubsubsection{\texorpdfstring{READ\_BUFFER\_SIZE}{READ\_BUFFER\_SIZE}}
{\footnotesize\ttfamily \#define READ\+\_\+\+BUFFER\+\_\+\+SIZE~2048}



Definition at line \mbox{\hyperlink{safe__io_8c_source_l00017}{17}} of file \mbox{\hyperlink{safe__io_8c_source}{safe\+\_\+io.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{safe__io_8c_a70bebf5ac8325b0eb363be83f11a1f9b}\label{safe__io_8c_a70bebf5ac8325b0eb363be83f11a1f9b}} 
\index{safe\_io.c@{safe\_io.c}!safe\_read@{safe\_read}}
\index{safe\_read@{safe\_read}!safe\_io.c@{safe\_io.c}}
\doxysubsubsection{\texorpdfstring{safe\_read()}{safe\_read()}}
{\footnotesize\ttfamily ssize\+\_\+t safe\+\_\+read (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{void $\ast$$\ast$}]{buf }\end{DoxyParamCaption})}



Read a message from a file descriptor safely. 

\begin{DoxyWarning}{Warning}
MUST NOT BE USED FOR SOCKETS.
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em fd} & The file descriptor of the client. \\
\hline
{\em buf} & The reference to the buffer where the message will be stored. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes read, -\/1 if an error occured. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{safe__io_8c_source_l00057}{57}} of file \mbox{\hyperlink{safe__io_8c_source}{safe\+\_\+io.\+c}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{safe__io_8c_a70bebf5ac8325b0eb363be83f11a1f9b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{safe__io_8c_a70bebf5ac8325b0eb363be83f11a1f9b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{safe__io_8c_ac8413ee3e5fa5ceab0e0cb43c4b6aab8}\label{safe__io_8c_ac8413ee3e5fa5ceab0e0cb43c4b6aab8}} 
\index{safe\_io.c@{safe\_io.c}!safe\_recv@{safe\_recv}}
\index{safe\_recv@{safe\_recv}!safe\_io.c@{safe\_io.c}}
\doxysubsubsection{\texorpdfstring{safe\_recv()}{safe\_recv()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structmessage}{message}} $\ast$ safe\+\_\+recv (\begin{DoxyParamCaption}\item[{int}]{sockfd,  }\item[{int}]{flags,  }\item[{bool}]{must\+Timeout }\end{DoxyParamCaption})}



Receive a message from a client safely. 


\begin{DoxyParams}{Parameters}
{\em sockfd} & The file descriptor of the client. \\
\hline
{\em flags} & the recv() flags. \\
\hline
{\em must\+Timeout} & If true, the function will exit after RECV\+\_\+\+TIMEOUT seconds, otherwise it will wait for the message to be received forever. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The message received, NULL if an error occured. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{safe__io_8c_source_l00127}{127}} of file \mbox{\hyperlink{safe__io_8c_source}{safe\+\_\+io.\+c}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{safe__io_8c_ac8413ee3e5fa5ceab0e0cb43c4b6aab8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{safe__io_8c_ac8413ee3e5fa5ceab0e0cb43c4b6aab8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{safe__io_8c_a3730804c00874106746163562e2693ac}\label{safe__io_8c_a3730804c00874106746163562e2693ac}} 
\index{safe\_io.c@{safe\_io.c}!safe\_send@{safe\_send}}
\index{safe\_send@{safe\_send}!safe\_io.c@{safe\_io.c}}
\doxysubsubsection{\texorpdfstring{safe\_send()}{safe\_send()}}
{\footnotesize\ttfamily int safe\+\_\+send (\begin{DoxyParamCaption}\item[{int}]{sockfd,  }\item[{const void $\ast$}]{buf,  }\item[{size\+\_\+t}]{count,  }\item[{int}]{flags }\end{DoxyParamCaption})}



Send a message to a client safely. 


\begin{DoxyParams}{Parameters}
{\em sockfd} & The file descriptor of the client. \\
\hline
{\em buf} & The buffer containing the message. \\
\hline
{\em count} & The number of bytes to send. \\
\hline
{\em flags} & the send() flags. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the message has been sent, -\/1 otherwise. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{safe__io_8c_source_l00022}{22}} of file \mbox{\hyperlink{safe__io_8c_source}{safe\+\_\+io.\+c}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{safe__io_8c_a3730804c00874106746163562e2693ac_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{safe__io_8c_af5b0cdbd9fea86b0c53e02b3b5e31518}\label{safe__io_8c_af5b0cdbd9fea86b0c53e02b3b5e31518}} 
\index{safe\_io.c@{safe\_io.c}!safe\_write@{safe\_write}}
\index{safe\_write@{safe\_write}!safe\_io.c@{safe\_io.c}}
\doxysubsubsection{\texorpdfstring{safe\_write()}{safe\_write()}}
{\footnotesize\ttfamily int safe\+\_\+write (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void $\ast$}]{buf,  }\item[{size\+\_\+t}]{count }\end{DoxyParamCaption})}



Write a message to a file descriptor safely. 


\begin{DoxyParams}{Parameters}
{\em fd} & The file descriptor of the client. \\
\hline
{\em buf} & The buffer containing the message. \\
\hline
{\em count} & The number of bytes to write. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the message has been sent, -\/1 otherwise. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{safe__io_8c_source_l00040}{40}} of file \mbox{\hyperlink{safe__io_8c_source}{safe\+\_\+io.\+c}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{safe__io_8c_af5b0cdbd9fea86b0c53e02b3b5e31518_icgraph}
\end{center}
\end{figure}
